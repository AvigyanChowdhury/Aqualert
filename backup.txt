from pymongo.mongo_client import MongoClient
from pymongo.server_api import ServerApi

uri = "mongodb+srv://admin:test1234@cluster0.ifzbffj.mongodb.net/?retryWrites=true&w=majority"

# Create a new client and connect to the server
client = MongoClient(uri, server_api=ServerApi('1'))

# Send a ping to confirm a successful connection
try:
    client.admin.command('ping')
    print("Pinged your deployment. You successfully connected to MongoDB!")
except Exception as e:
    print(e)

# MongoDB configuration
MONGODB_URL = "mongodb+srv://admin:test1234@cluster0.ifzbffj.mongodb.net/?retryWrites=true&w=majority"
DATABASE_NAME = "Cluster0"
COLLECTION_NAME = "predictions2"



client=MongoClient("mongodb+srv://admin:test1234@cluster0.ifzbffj.mongodb.net/?retryWrites=true&w=majority")
db = client[DATABASE_NAME]
collection = db[COLLECTION_NAME]

class CustomJSONEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, ObjectId):
            return str(obj)
        return super().default(obj)
